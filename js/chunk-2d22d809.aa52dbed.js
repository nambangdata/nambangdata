(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d809"],{f889:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dashboard",[n("div",[n("div",{staticClass:"mb-4 text-white"},[n("h5",[t._v("Perizinan - Kewajiban")]),n("small",[t._v("Perizinan - Kewajiban")])]),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("ul",{staticClass:"nav nav-tabs mb-4",staticStyle:{"border-bottom":"none"},attrs:{id:"myTab",role:"tablist"}},[n("li",{staticClass:"nav-item nav-tab-link"},[n("a",{staticClass:"nav-link active",attrs:{id:"report-tab","data-toggle":"tab",href:"#report",role:"tab","aria-controls":"report","aria-selected":"false"},on:{click:function(e){return t.showTable("report")}}},[t._v("Laporan")])])]),"report"==t.selectedTable?n("report",{attrs:{id:t.id}}):t._e(),"dues"==t.selectedTable?n("dues"):t._e(),"document"==t.selectedTable?n("document"):t._e()],1)])])])},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"text-right mb-2"},[n("button",{staticClass:"btn btn-primary",on:{click:t.showAdd}},[n("i",{staticClass:"fas fa-plus"}),t._v(" Tambah Kewajiban Pelaporan")])]),n("table",{staticClass:"table"},[t._m(0),n("tbody",[0==t.datas.length?n("tr",[n("td",{staticClass:"text-center",attrs:{colspan:"7"}},[t._v("Belum Ada Data")])]):t._l(t.datas,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(a+1))]),n("td",[t._v(t._s(e.instance))]),n("td",[t._v(t._s(e.type))]),n("td",[t._v(t._s(e.report.last))]),n("td",[n("a",{attrs:{href:e.lastDocument.link,target:"_blank"}},[t._v(" "+t._s(e.lastDocument.file)+" ")])]),n("td",[t._v(t._s(e.report.next))]),n("td",[n("button",{staticClass:"btn btn-success btn-sm mr-1",on:{click:function(n){return t.showDetail(e.id,e.template.link)}}},[n("i",{staticClass:"fas fa-file"})]),n("button",{staticClass:"btn btn-warning btn-sm",on:{click:function(n){return t.showEdit(e)}}},[n("i",{staticClass:"fas fa-edit"})]),n("button",{staticClass:"btn btn-danger btn-sm ml-1",on:{click:function(n){return t.showDelete(e.id)}}},[n("i",{staticClass:"fas fa-trash"})])])])}))],2)]),n("modal-form",{ref:"modalForm",attrs:{instances:t.instances,pics:t.pics,id:t.id,document:t.document,reportingNames:t.reportingNames,getReport:t.getReport}}),n("modal-detail",{ref:"modalDetail"})],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("No")]),n("th",[t._v("Instansi")]),n("th",[t._v("Jenis Laporan")]),n("th",[t._v("Pelaporan Terakhir")]),n("th",[t._v("Dokumen Terakhir")]),n("th",[t._v("Laporan Selanjutnya")]),n("th",[t._v("Aksi")])])])}],o=(n("4160"),n("b0c0"),n("ac1f"),n("5319"),n("159b"),n("96cf"),n("1da1")),l=n("f07f"),c=n("62f5"),u=n("c6db"),d=n("cc57"),m=n("3686"),p=n("424e"),h=n("5415"),v=n("e071"),f={name:"Report",props:["id"],mixins:[u["a"],d["a"],m["a"]],components:{ModalForm:l["a"],ModalDetail:c["a"]},data:function(){return{reportingNames:[],datas:[],instances:[],pics:[],document:null,docPermitNames:[]}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading(),e.next=3,t.getInstance();case 3:return t.instances=e.sent,e.next=6,t.getPersonInCharge();case 6:return t.pics=e.sent,e.next=9,t.getDocPermitName();case 9:return t.docPermitNames=e.sent,e.next=12,t.getDocument();case 12:return e.next=14,t.getReport();case 14:return e.next=16,t.getReportingName();case 16:t.hideLoading();case 17:case"end":return e.stop()}}),e)})))()},methods:{getDocument:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.document=null,e.prev=1,e.next=4,Object(p["c"])(t.id);case 4:n=e.sent,a=n.data[0].document,a.labeled_name=t.selectedData(t.docPermitNames,a.permitId),t.document=a,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0),401==(null===(r=error.response)||void 0===r?void 0:r.status)&&t.invalidSession();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()},getReport:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.datas=[],e.prev=1,e.next=4,Object(h["b"])(t.id);case 4:n=e.sent,a=n.data,a.forEach((function(e){var n,a,r,i,s,o=null,l=null,c=null,u=null;null===(n=e.reportingTimeTables)||void 0===n||n.forEach((function(e){if(!c){var n,a,r,i;if(1==e.isReported&&e.reportedFilesList.length>0)l=t.formatDate(null===e||void 0===e?void 0:e.time),u=null===(n=e.reportedFilesList)||void 0===n||null===(a=n[(null===(i=e.reportedFilesList)||void 0===i?void 0:i.length)-1])||void 0===a||null===(r=a.fileAttachment)||void 0===r?void 0:r.path,o=null===e||void 0===e?void 0:e.id;!l||1==e.isReported&&0!=e.reportedFilesList.length||e.previousReportingTimeTableId!=o||(c=t.formatDate(null===e||void 0===e?void 0:e.time))}})),t.datas.push({id:e.id,instance:null===(a=e.instance)||void 0===a?void 0:a.name,type:null===(r=e.reportType)||void 0===r?void 0:r.name,report:{last:l,next:c},lastDocument:{file:u,link:"http://ed72-36-68-12-132.ngrok.io//api/reporting/get_file/name?fileName="+escape(u)},template:{file:null===(i=e.attachment)||void 0===i?void 0:i.path,link:"http://ed72-36-68-12-132.ngrok.io//api/reporting/get_file/name?fileName="+escape(null===(s=e.attachment)||void 0===s?void 0:s.path)}})})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},getReportingName:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.reportingNames=[],e.prev=1,e.next=4,Object(v["b"])();case 4:n=e.sent,a=n.data,a.forEach((function(e,n){t.reportingNames.push({value:e.id,label:e.name})})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},showAdd:function(){this.$refs.modalForm.showAdd(),$("#modalAdd").modal("show")},showDetail:function(t,e){this.$refs.modalDetail.getDetail(t,e),$("#modalDetail").modal("show")},showEdit:function(t){this.$refs.modalForm.showEdit(t)},showDelete:function(t){var e=this;this.$swal({title:"Hapus Data",text:"Yakin ingin menghapus data ?",type:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(n){if(n.value){e.showLoading();var a=Object(h["d"])(t);a.then((function(t){e.hideLoading(),e.$toast.open({message:"Laporan Berhasil Dihapus !",type:"info",position:"top-right"}),e.getReport()})).catch((function(t){var n;e.hideLoading(),e.showNotif("Gagal Menghapus Data"),console.log(t),401==(null===(n=t.response)||void 0===n?void 0:n.status)&&e.invalidSession()}))}}))},invalidSession:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(d["a"])("Sesi sudah tidak valid, silahkan login"),e.next=3,t.$store.dispatch("auth/authLogout");case 3:t.$router.replace("/login");case 4:case"end":return e.stop()}}),e)})))()}}},b=f,g=n("2877"),w=Object(g["a"])(b,i,s,!1,null,null,null),_=w.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},x=[],D={name:"Dues"},R=D,C=Object(g["a"])(R,k,x,!1,null,null,null),j=C.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},N=[],O={name:"Document"},L=O,y=Object(g["a"])(L,T,N,!1,null,null,null),E=y.exports,P={name:"Obligation",props:["id"],components:{Report:_,Dues:j,Document:E},data:function(){return{selectedTable:"report"}},methods:{showTable:function(t){this.selectedTable=t}}},F=P,A=Object(g["a"])(F,a,r,!1,null,null,null);e["default"]=A.exports}}]);
//# sourceMappingURL=chunk-2d22d809.aa52dbed.js.map