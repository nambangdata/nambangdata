{"version":3,"sources":["webpack:///./src/components/pages/obligation/Report.vue?03a2","webpack:///src/components/pages/obligation/Report.vue","webpack:///./src/components/pages/obligation/Report.vue?5310","webpack:///./src/components/pages/obligation/Report.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","datas","length","attrs","_l","v","i","key","_s","instance","type","report","last","lastDocument","link","file","next","on","$event","showEdit","showDelete","id","showDetail","template","ref","instances","pics","document","reportingNames","getReport","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d0b2759.dcc81a6d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dashboard',[_c('div',{staticClass:\"mb-4 text-white\"},[_c('h5',[_vm._v(\"Kewajiban - Pelaporan\")]),_c('small',[_vm._v(\"Kewajiban - Pelaporan\")])]),_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('table',{staticClass:\"table\"},[_c('thead',[_c('tr',[_c('th',[_vm._v(\"No\")]),_c('th',[_vm._v(\"Instansi\")]),_c('th',[_vm._v(\"Jenis Laporan\")]),_c('th',[_vm._v(\"Pelaporan Terakhir\")]),_c('th',[_vm._v(\"Dokumen Terakhir\")]),_c('th',[_vm._v(\"Laporan Selanjutnya\")]),_c('th',[_vm._v(\"Aksi\")])])]),_c('tbody',[(_vm.datas.length == 0)?_c('tr',[_c('td',{staticClass:\"text-center\",attrs:{\"colspan\":\"7\"}},[_vm._v(\"Belum Ada Data\")])]):_vm._l((_vm.datas),function(v,i){return _c('tr',{key:i},[_c('td',[_vm._v(_vm._s(i+1))]),_c('td',[_vm._v(_vm._s(v.instance))]),_c('td',[_vm._v(_vm._s(v.type))]),_c('td',[_vm._v(_vm._s(v.report.last))]),_c('td',[_c('a',{attrs:{\"href\":v.lastDocument.link,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(v.lastDocument.file)+\" \")])]),_c('td',[_vm._v(_vm._s(v.report.next))]),_c('td',[_c('button',{staticClass:\"btn btn-warning btn-sm\",on:{\"click\":function($event){return _vm.showEdit(v)}}},[_c('i',{staticClass:\"fas fa-edit\"})]),_c('button',{staticClass:\"btn btn-danger btn-sm ml-1\",on:{\"click\":function($event){return _vm.showDelete(v.id)}}},[_c('i',{staticClass:\"fas fa-trash\"})]),_c('button',{staticClass:\"btn btn-success btn-sm mr-1\",on:{\"click\":function($event){return _vm.showDetail(v.id, v.template.link)}}},[_c('i',{staticClass:\"fas fa-file\"})])])])})],2)]),_c('modal-detail',{ref:\"modalDetail\"}),_c('modal-form',{ref:\"modalForm\",attrs:{\"instances\":_vm.instances,\"pics\":_vm.pics,\"id\":_vm.id,\"document\":_vm.document,\"reportingNames\":_vm.reportingNames,\"getReport\":_vm.getReport}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<Dashboard>\r\n\t\t\r\n\t\t<div class=\"mb-4 text-white\">\r\n\t\t\t<h5>Kewajiban - Pelaporan</h5>\r\n\t\t\t<small>Kewajiban - Pelaporan</small>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class=\"card\">\r\n\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\r\n\t\t\t\t<table class=\"table\">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>No</th>\r\n\t\t\t\t\t\t\t<th>Instansi</th>\r\n\t\t\t\t\t\t\t<th>Jenis Laporan</th>\r\n\t\t\t\t\t\t\t<th>Pelaporan Terakhir</th>\r\n\t\t\t\t\t\t\t<th>Dokumen Terakhir</th>\r\n\t\t\t\t\t\t\t<th>Laporan Selanjutnya</th>\r\n\t\t\t\t\t\t\t<th>Aksi</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr v-if=\"datas.length == 0\">\r\n\t\t\t\t\t\t\t<td colspan=\"7\" class=\"text-center\">Belum Ada Data</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr v-else v-for=\"(v,i) in datas\" :key=\"i\">\r\n\t\t\t\t\t\t\t<td>{{ i+1 }}</td>\r\n\t\t\t\t\t\t\t<td>{{ v.instance }}</td>\r\n\t\t\t\t\t\t\t<td>{{ v.type }}</td>\r\n\t\t\t\t\t\t\t<td>{{ v.report.last }}</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<a :href=\"v.lastDocument.link\" target=\"_blank\">\r\n\t\t\t\t\t\t\t\t\t{{ v.lastDocument.file }}\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td>{{ v.report.next }}</td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn-warning btn-sm\" @click=\"showEdit(v)\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-edit\"></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn-danger btn-sm ml-1\" @click=\"showDelete(v.id)\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-trash\"></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn-success btn-sm mr-1\" @click=\"showDetail(v.id, v.template.link)\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-file\"></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t\t\r\n\t\t\t\t<modal-detail\r\n\t\t\t\tref=\"modalDetail\"\r\n\t\t\t\t></modal-detail>\r\n\t\t\t\t<modal-form\t\t\r\n\t\t\t\t:instances=\"instances\"\r\n\t\t\t\t:pics=\"pics\"\r\n\t\t\t\t:id=\"id\"\r\n\t\t\t\t:document=\"document\"\r\n\t\t\t\t:reportingNames=\"reportingNames\"\r\n\t\t\t\t:getReport=\"getReport\"\r\n\t\t\t\tref=\"modalForm\"\r\n\t\t\t\t></modal-form>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t</Dashboard>\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\n\t\r\n\timport ModalDetail from './single/detail/Report.vue'\r\n\timport ModalForm from './single/form/Report.vue'\r\n\timport documents from '@/mixins/document'\r\n\timport alert from '@/mixins/alert'\r\n\timport utils from '@/mixins/util'\r\n\timport { documentById } from '@/api/document'\r\n\timport { reportingAll, reportingDelete } from '@/api/reporting'\r\n\timport { reportNameAll } from '@/api/reportName'\r\n\t\r\n\texport default{\r\n\t\tname: 'Report',\r\n\t\tmixins: [\r\n\t\tdocuments,\r\n\t\talert,\r\n\t\tutils,\r\n\t\t],\r\n\t\tcomponents: {\r\n\t\t\tModalDetail,\r\n\t\t\tModalForm,\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\treportingNames: [],\r\n\t\t\t\tdatas: [],\r\n\t\t\t\tinstances: [],\r\n\t\t\t\tpics: [],\r\n\t\t\t\tdocument: null,\r\n\t\t\t\tdocPermitNames: [],\r\n\t\t\t\tid: null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync mounted() {\r\n\t\t\tthis.showLoading();\r\n\t\t\tthis.instances = await this.getInstance();\r\n\t\t\tthis.pics = await this.getPersonInCharge();\r\n\t\t\tthis.docPermitNames = await this.getDocPermitName();\r\n\t\t\tawait this.getReportingName();\r\n\t\t\tthis.getReport();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync getReport(){\r\n\t\t\t\tthis.showLoading();\r\n\t\t\t\tthis.datas = [];\r\n\t\t\t\ttry{\r\n\t\t\t\t\tlet request = await reportingAll();\r\n\t\t\t\t\tlet data = request.data;\r\n\t\t\t\t\t\r\n\t\t\t\t\tdata.forEach((v) => {\r\n\t\t\t\t\t\tlet previousReportingTimeTable = null;\r\n\t\t\t\t\t\tlet lastReport = null;\r\n\t\t\t\t\t\tlet nextReport = null;\r\n\t\t\t\t\t\tlet lastDocument = null;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tv.reportingTimeTables?.forEach((timeTable) => {\r\n\t\t\t\t\t\t\tif(!nextReport){\r\n\t\t\t\t\t\t\t\tif(timeTable.isReported == 1 && timeTable.reportedFilesList.length > 0){\r\n\t\t\t\t\t\t\t\t\tlastReport = this.formatDate(timeTable?.time);\r\n\t\t\t\t\t\t\t\t\tlastDocument = timeTable.reportedFilesList?.[timeTable.reportedFilesList?.length - 1]?.fileAttachment?.path;\r\n\t\t\t\t\t\t\t\t\tpreviousReportingTimeTable = timeTable?.id;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(lastReport && (timeTable.isReported != 1 || timeTable.reportedFilesList.length == 0) && timeTable.previousReportingTimeTableId == previousReportingTimeTable){\r\n\t\t\t\t\t\t\t\t\tnextReport = this.formatDate(timeTable?.time);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.datas.push({\r\n\t\t\t\t\t\t\tid: v.id,\r\n\t\t\t\t\t\t\tinstance: v.instance?.name,\r\n\t\t\t\t\t\t\ttype: v.reportType?.name,\r\n\t\t\t\t\t\t\treport: {\r\n\t\t\t\t\t\t\t\tlast: lastReport,\r\n\t\t\t\t\t\t\t\tnext: nextReport,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tlastDocument: {\r\n\t\t\t\t\t\t\t\tfile: lastDocument,\r\n\t\t\t\t\t\t\t\tlink: process.env.VUE_APP_API_URL + \"/api/reporting/get_file/name?fileName=\" + escape(lastDocument),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttemplate: {\r\n\t\t\t\t\t\t\t\tfile: v.attachment?.path,\r\n\t\t\t\t\t\t\t\tlink: process.env.VUE_APP_API_URL + \"/api/reporting/get_file/name?fileName=\" + escape(v.attachment?.path),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.hideLoading();\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\tthis.hideLoading();\r\n\t\t\t\t\tif(error.response?.status == 401){\r\n\t\t\t\t\t\tthis.invalidSession();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getReportingName(){\r\n\t\t\t\tthis.reportingNames = [];\r\n\t\t\t\ttry{\r\n\t\t\t\t\tlet request = await reportNameAll();\r\n\t\t\t\t\tlet data = request.data;\r\n\t\t\t\t\t\r\n\t\t\t\t\tdata.forEach((v,i) => {\r\n\t\t\t\t\t\tthis.reportingNames.push({\r\n\t\t\t\t\t\t\tvalue: v.id,\r\n\t\t\t\t\t\t\tlabel: v.name,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshowAdd(){\r\n\t\t\t\t$(\"#modalAdd\").modal(\"show\");\r\n\t\t\t},\r\n\t\t\tshowDetail(id, format){\r\n\t\t\t\tthis.$refs.modalDetail.getDetail(id, format);\r\n\t\t\t\t$(\"#modalDetail\").modal(\"show\");\r\n\t\t\t},\r\n\t\t\tshowEdit(data){\r\n\t\t\t\tthis.$refs.modalForm.showEdit(data);\r\n\t\t\t\tthis.$refs.modalForm.is_single = true;\r\n\t\t\t},\r\n\t\t\tshowDelete(id){\r\n\t\t\t\tthis.$swal({\r\n\t\t\t\t\ttitle: 'Hapus Data',\r\n\t\t\t\t\ttext: \"Yakin ingin menghapus data ?\",\r\n\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\tshowCancelButton: true,\r\n\t\t\t\t\tconfirmButtonColor: '#3085d6',\r\n\t\t\t\t\tcancelButtonColor: '#d33',\r\n\t\t\t\t\tconfirmButtonText: 'Yes'\r\n\t\t\t\t}).then((result) => {\r\n\t\t\t\t\tif (result.value) {\r\n\t\t\t\t\t\tthis.showLoading();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet request = reportingDelete(id);\r\n\t\t\t\t\t\trequest\r\n\t\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\t\tthis.hideLoading();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.$toast.open({\r\n\t\t\t\t\t\t\t\tmessage: 'Laporan Berhasil Dihapus !',\r\n\t\t\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\t\t\tposition: 'top-right',\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.getReport();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\tthis.hideLoading();\r\n\t\t\t\t\t\t\tthis.showNotif(\"Gagal Menghapus Data\");\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\tif(error.response?.status == 401){\r\n\t\t\t\t\t\t\t\tthis.invalidSession();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync invalidSession(){\r\n\t\t\t\talert(\"Sesi sudah tidak valid, silahkan login\");\r\n\t\t\t\tawait this.$store.dispatch(\"auth/authLogout\");\r\n\t\t\t\tthis.$router.replace(\"/login\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Report.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Report.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Report.vue?vue&type=template&id=610fe03b&\"\nimport script from \"./Report.vue?vue&type=script&lang=js&\"\nexport * from \"./Report.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}