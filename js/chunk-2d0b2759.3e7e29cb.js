(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2759"],{"23ce":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dashboard",[n("div",{staticClass:"mb-4 text-white"},[n("h5",[t._v("Kewajiban - Pelaporan")]),n("small",[t._v("Kewajiban - Pelaporan")])]),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("No")]),n("th",[t._v("Instansi")]),n("th",[t._v("Jenis Laporan")]),n("th",[t._v("Pelaporan Terakhir")]),n("th",[t._v("Dokumen Terakhir")]),n("th",[t._v("Laporan Selanjutnya")]),n("th",[t._v("Aksi")])])]),n("tbody",[0==t.datas.length?n("tr",[n("td",{staticClass:"text-center",attrs:{colspan:"7"}},[t._v("Belum Ada Data")])]):t._l(t.datas,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(a+1))]),n("td",[t._v(t._s(e.instance))]),n("td",[t._v(t._s(e.type))]),n("td",[t._v(t._s(e.report.last))]),n("td",[n("a",{attrs:{href:e.lastDocument.link,target:"_blank"}},[t._v(" "+t._s(e.lastDocument.file)+" ")])]),n("td",[t._v(t._s(e.report.next))]),n("td",[n("button",{staticClass:"btn btn-warning btn-sm",on:{click:function(n){return t.showEdit(e)}}},[n("i",{staticClass:"fas fa-edit"})]),n("button",{staticClass:"btn btn-danger btn-sm ml-1",on:{click:function(n){return t.showDelete(e.id)}}},[n("i",{staticClass:"fas fa-trash"})]),n("button",{staticClass:"btn btn-success btn-sm mr-1",on:{click:function(n){return t.showDetail(e.id,e.template.link)}}},[n("i",{staticClass:"fas fa-file"})])])])}))],2)]),n("modal-detail",{ref:"modalDetail"}),n("modal-form",{ref:"modalForm",attrs:{instances:t.instances,pics:t.pics,id:t.id,document:t.document,reportingNames:t.reportingNames,getReport:t.getReport}})],1)])])},i=[],o=(n("4160"),n("b0c0"),n("ac1f"),n("5319"),n("159b"),n("96cf"),n("1da1")),r=n("62f5"),s=n("f07f"),l=n("c6db"),c=n("cc57"),d=n("3686"),u=(n("424e"),n("5415")),p=n("e071"),h={name:"Report",mixins:[l["a"],c["a"],d["a"]],components:{ModalDetail:r["a"],ModalForm:s["a"]},data:function(){return{reportingNames:[],datas:[],instances:[],pics:[],document:null,docPermitNames:[],id:null}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading(),e.next=3,t.getInstance();case 3:return t.instances=e.sent,e.next=6,t.getPersonInCharge();case 6:return t.pics=e.sent,e.next=9,t.getDocPermitName();case 9:return t.docPermitNames=e.sent,e.next=12,t.getReportingName();case 12:t.getReport();case 13:case"end":return e.stop()}}),e)})))()},methods:{getReport:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading(),t.datas=[],e.prev=2,e.next=5,Object(u["a"])();case 5:n=e.sent,a=n.data,a.forEach((function(e){var n,a,i,o,r,s=null,l=null,c=null,d=null;null===(n=e.reportingTimeTables)||void 0===n||n.forEach((function(e){if(!c){var n,a,i,o;if(1==e.isReported&&e.reportedFilesList.length>0)l=t.formatDate(null===e||void 0===e?void 0:e.time),d=null===(n=e.reportedFilesList)||void 0===n||null===(a=n[(null===(o=e.reportedFilesList)||void 0===o?void 0:o.length)-1])||void 0===a||null===(i=a.fileAttachment)||void 0===i?void 0:i.path,s=null===e||void 0===e?void 0:e.id;!l||1==e.isReported&&0!=e.reportedFilesList.length||e.previousReportingTimeTableId!=s||(c=t.formatDate(null===e||void 0===e?void 0:e.time))}})),t.datas.push({id:e.id,instance:null===(a=e.instance)||void 0===a?void 0:a.name,type:null===(i=e.reportType)||void 0===i?void 0:i.name,report:{last:l,next:c},lastDocument:{file:d,link:"https://6eac-36-65-77-82.ngrok.io/api/reporting/get_file/name?fileName="+escape(d)},template:{file:null===(o=e.attachment)||void 0===o?void 0:o.path,link:"https://6eac-36-65-77-82.ngrok.io/api/reporting/get_file/name?fileName="+escape(null===(r=e.attachment)||void 0===r?void 0:r.path)}})})),t.hideLoading(),e.next=16;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0),t.hideLoading(),401==(null===(i=error.response)||void 0===i?void 0:i.status)&&t.invalidSession();case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))()},getReportingName:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.reportingNames=[],e.prev=1,e.next=4,Object(p["b"])();case 4:n=e.sent,a=n.data,a.forEach((function(e,n){t.reportingNames.push({value:e.id,label:e.name})})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},showAdd:function(){$("#modalAdd").modal("show")},showDetail:function(t,e){this.$refs.modalDetail.getDetail(t,e),$("#modalDetail").modal("show")},showEdit:function(t){this.$refs.modalForm.showEdit(t),this.$refs.modalForm.is_single=!0},showDelete:function(t){var e=this;this.$swal({title:"Hapus Data",text:"Yakin ingin menghapus data ?",type:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(n){if(n.value){e.showLoading();var a=Object(u["d"])(t);a.then((function(t){e.hideLoading(),e.$toast.open({message:"Laporan Berhasil Dihapus !",type:"info",position:"top-right"}),e.getReport()})).catch((function(t){var n;e.hideLoading(),e.showNotif("Gagal Menghapus Data"),console.log(t),401==(null===(n=t.response)||void 0===n?void 0:n.status)&&e.invalidSession()}))}}))},invalidSession:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(c["a"])("Sesi sudah tidak valid, silahkan login"),e.next=3,t.$store.dispatch("auth/authLogout");case 3:t.$router.replace("/login");case 4:case"end":return e.stop()}}),e)})))()}}},m=h,v=n("2877"),f=Object(v["a"])(m,a,i,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0b2759.3e7e29cb.js.map